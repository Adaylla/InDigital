{% if reservas %}
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>Laboratório</th>
                    <th>Data</th>
                    <th>Horário</th>
                    <th>Status</th>
                    <th>Monitor</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                {% for reserva in reservas %}
                    <tr class="{% if reserva.disponibilidade.data < today %}table-secondary{% elif reserva.disponibilidade.data == today %}table-info{% endif %}">
                        <td>
                            <i class="fas fa-flask"></i>
                            {{ reserva.disponibilidade.laboratorio.num_laboratorio }}
                        </td>
                        <td>
                            <i class="fas fa-calendar"></i>
                            {{ reserva.disponibilidade.data|date:"d/m/Y" }}
                            {% if reserva.disponibilidade.data == today %}
                                <span class="badge bg-info">Hoje</span>
                            {% elif reserva.disponibilidade.data > today %}
                                <span class="badge bg-success">Futuro</span>
                            {% else %}
                                <span class="badge bg-secondary">Passado</span>
                            {% endif %}
                        </td>
                        <td>
                            <i class="fas fa-clock"></i>
                            {{ reserva.disponibilidade.horario_inicio|time:"H:i" }} às {{ reserva.disponibilidade.horario_fim|time:"H:i" }}
                        </td>
                        <td>
                            {% if reserva.status_frequencia == 'P' %}
                                <span class="badge bg-success">
                                    <i class="fas fa-check"></i> Presente
                                </span>
                            {% elif reserva.status_frequencia == 'F' %}
                                <span class="badge bg-danger">
                                    <i class="fas fa-times"></i> Faltou
                                </span>
                            {% elif reserva.status_frequencia == 'N' %}
                                <span class="badge bg-warning">
                                    <i class="fas fa-question"></i> Não Registrado
                                </span>
                            {% else %}
                                <span class="badge bg-secondary">
                                    <i class="fas fa-clock"></i> Pendente
                                </span>
                            {% endif %}
                        </td>
                        <td>
                            {% if reserva.disponibilidade.monitor %}
                                <i class="fas fa-user-tie"></i>
                                {{ reserva.disponibilidade.monitor.username }}
                            {% else %}
                                <span class="text-muted">
                                    <i class="fas fa-user-slash"></i>
                                    Sem monitor
                                </span>
                            {% endif %}
                        </td>
                        <td>
                            {% if reserva.disponibilidade.data > today %}
                                <a href="{% url 'cancelar_reserva' reserva.id %}" 
                                   class="btn btn-sm btn-outline-danger" 
                                   onclick="return confirm('Tem certeza que deseja cancelar esta reserva?')"
                                   title="Cancelar reserva">
                                    <i class="fas fa-times"></i>
                                </a>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    <div class="text-center text-muted py-4">
        <i class="fas fa-inbox fa-3x mb-3"></i>
        <p>Nenhuma reserva encontrada nesta categoria.</p>
    </div>
{% endif %}
